{% load static %}
{% load lazy_loading %}
<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{% block page_title %}Admin Panel{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'css/main.css' %}" />
    <link rel="stylesheet" href="{% static 'css/admin_panel.css' %}?v=4" />
    <link rel="stylesheet" href="{% static 'css/lazy-loading.css' %}" />
    {% if lazy_image_enabled %}
      <script>
        window.LAZY_LOADING_CONFIG = {% lazy_loading_config %};
      </script>
      <script src="{% static 'js/lazy-loading.js' %}" defer></script>
    {% endif %}
  </head>
  <body class="admin-body">
    {% with url_name=request.resolver_match.url_name|default:'' %}
      <div class="admin-shell">
        <aside class="admin-sidebar" aria-label="Admin navigation">
          <div class="admin-brand">Cargo Viewer</div>
          <nav class="admin-nav">
            <a class="admin-nav-link {% if url_name == 'admin_panel_dashboard' %}is-active{% endif %}" href="{% url 'admin_panel_dashboard' %}">
              <span class="admin-nav-icon" aria-hidden="true"></span>
              Dashboard
            </a>
            <a class="admin-nav-link {% if url_name == 'admin_panel_payments' %}is-active{% endif %}" href="{% url 'admin_panel_payments' %}">
              <span class="admin-nav-icon" aria-hidden="true"></span>
              Payments
            </a>
            <a class="admin-nav-link {% if url_name == 'admin_panel_subscriptions' %}is-active{% endif %}" href="{% url 'admin_panel_subscriptions' %}">
              <span class="admin-nav-icon" aria-hidden="true"></span>
              Subscriptions
            </a>
            <a class="admin-nav-link {% if url_name == 'admin_panel_promocodes' %}is-active{% endif %}" href="{% url 'admin_panel_promocodes' %}">
              <span class="admin-nav-icon" aria-hidden="true"></span>
              Promo
            </a>
            <a class="admin-nav-link {% if url_name == 'admin_panel_settings' %}is-active{% endif %}" href="{% url 'admin_panel_settings' %}">
              <span class="admin-nav-icon" aria-hidden="true"></span>
              Settings
            </a>
            <a class="admin-nav-link {% if url_name == 'admin_panel_audit_log' %}is-active{% endif %}" href="{% url 'admin_panel_audit_log' %}">
              <span class="admin-nav-icon" aria-hidden="true"></span>
              Audit
            </a>
            <a class="admin-nav-link {% if url_name == 'admin_panel_cache_diagnostics' or url_name == 'admin_panel_cache_diagnostics_session' %}is-active{% endif %}" href="{% url 'admin_panel_cache_diagnostics' %}">
              <span class="admin-nav-icon" aria-hidden="true"></span>
              Cache diagnostics
            </a>
          </nav>

          <div class="admin-sidebar-footer">
            <div class="muted" style="font-size:12px;">Signed in</div>
            <div style="font-weight:700;">{{ request.user.username }}</div>
          </div>
        </aside>

        <div class="admin-main">
          <header class="admin-topbar">
            <h1 class="admin-page-title">
              {% if url_name == 'admin_panel_dashboard' %}Dashboard
              {% elif url_name == 'admin_panel_payments' %}Payments
              {% elif url_name == 'admin_panel_subscriptions' %}Subscriptions
              {% elif url_name == 'admin_panel_promocodes' %}Promo codes
              {% elif url_name == 'admin_panel_settings' %}Settings
              {% elif url_name == 'admin_panel_audit_log' %}Audit log
              {% elif url_name == 'admin_panel_cache_diagnostics' %}Cache diagnostics
              {% elif url_name == 'admin_panel_cache_diagnostics_session' %}Cache diagnostics
              {% else %}Admin Panel{% endif %}
            </h1>
            <div class="admin-topbar-actions">
              {% block header_actions %}{% endblock %}
            </div>
          </header>

          <div class="admin-content">
            {% block body %}{% endblock %}
          </div>
        </div>
      </div>
    {% endwith %}
  </body>
</html>
